<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
      <title>Profile Page</title>
    <script src="/site/scripts/navbar.js" defer></script>
    <script src="/site/scripts/passage.js" defer></script>
  <link rel="stylesheet" type="text/css" href="/site/styles/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="icon" type="image/x-icon" href="https://www.dropbox.com/scl/fi/a0qiv80qrjzu8vvvv2ouk/512sign.png?rlkey=ykjui910b9eufvs1n0yzbok2s&st=m0y64ssi&raw=1">
    <link rel="stylesheet" type="text/css" href="/site/styles/navbar.css">
    <link rel="stylesheet" type="text/css" href="/site/styles/styles_profile.css">
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js";

// Your Firebase configuration
const firebaseConfig = {
   apiKey: "AIzaSyA9fv5y23398kzP8HljS3BlreOjycA-NUI",
  authDomain: "anglomova-429e2.firebaseapp.com",
  databaseURL: "https://anglomova-429e2-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "anglomova-429e2",
  storageBucket: "anglomova-429e2.appspot.com",
  messagingSenderId: "30552534006",
  appId: "1:30552534006:web:74d0515d25b5778e30f5d7",
  measurementId: "G-9W633V0TWL"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Fetch and display user information
onAuthStateChanged(auth, async (user) => {
  if (user) {
    const userNameElement = document.getElementById('user-name');
    const userEmailElement = document.getElementById('user-email');

    // Fetch user data from Firestore
    const userDoc = await getDoc(doc(db, 'users', user.uid));
    if (userDoc.exists()) {
      const userData = userDoc.data();
      userNameElement.textContent = userData.name || user.displayName;
      userEmailElement.textContent = userData.email || user.email;
    } else {
      // No user document, use auth user data
      userNameElement.textContent = user.displayName;
      userEmailElement.textContent = user.email;
    }
  } else {
    // No user is signed in, redirect to login page
    window.location.href = 'login.html';
  }
});

// Logout functionality
document.getElementById('logout-button').addEventListener('click', () => {
  signOut(auth).then(() => {
    window.location.href = 'login.html';
  }).catch((error) => {
    console.error('Error signing out: ', error);
  });
});
</script>
</head>
<body>
 <section class="profile-container"> 
<aside class="sidebar">
  <div class="sidebar-set">
<div class="info-item">
<span class="material-symbols-outlined">person</span>
<div class="info-text">Info</div>
</div>
<div class="sidebar-items">
<span class="material-symbols-outlined"> chevron_right </span>
<span class="sidebar-text">How2Start</span>
</div>
<div class="sidebar-items">
<span class="material-symbols-outlined"> book_5 </span>
<span class="sidebar-text">Tests</span>
</div>
<div class="sidebar-items">
<span class="material-symbols-outlined"> people </span>
<span class="sidebar-text">Friends</span>
</div>
<div class="sidebar-items">
<span class="material-symbols-outlined"> account_balance </span>
<span class="sidebar-text">Balance</span>
</div>
<div class="sidebar-items">
<span class="material-symbols-outlined"> monitoring </span>
<span class="sidebar-text">Stats</span>
</div>
<div class="sidebar-items">
<span class="material-symbols-outlined"> settings </span>
<span class="sidebar-text">Settings</span>
</div>
<div class="sidebar-items" style="position: fixed;
  bottom: 3rem;" id="logout-button">
<span class="material-symbols-outlined"> logout </span>
<span class="sidebar-text">EXIT</span>
</div>
          </div>
      </aside>
      
<section class="main-section">
<div class="profile-section">
<div class="profile-header">
<div class="profile-info">
<div class="profile-image-container">
<div class="profile-image-wrapper">
<img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/3cc5921692275d88eb9007e1d2f24ca155f6d0e36fbab7e54004fcfd50c31bea?apiKey=a43f084060344c26bad51387d8bdfbd6&" class="profile-image" alt="Profile picture" />
<div class="profile-name-container">
<div class="profile-label">Name:</div>
<div class="profile-name" id="user-name">Robert Phonk</div>
                  </div>
                </div>
              </div>
<div class="profile-details">
<div class="detail-item">
<div class="detail-label">ID:</div>
<div class="detail-value">jjcv6jd6dehxhg</div>
</div>
<div class="detail-item">
<div class="detail-label">Native language:</div>
<div class="detail-value">jjcv6jd6dehxhg</div>
</div>
<div class="detail-item">
<div class="detail-label">Job/Study:</div>
<div class="detail-value">electrician</div>
</div>
<div class="detail-item">
<div class="detail-label">E-mail:</div>
<div class="detail-value" id="user-email">nagibator2k7@gmail.com</div>
</div>
<div class="detail-item">
<div class="detail-label">Contacts:</div>
<div class="detail-value">tg: @furyswipes</div>
</div>
<div class="detail-item">
<div class="detail-label">Goal:</div>
<div class="detail-value">move Dubai</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          
<div class="start-section">
<div class="start-content">
<div class="start-text">
<h2 class="start-heading">LET'S<br>START!</h2>
</div>
<div class="steps-content">
<div class="step-item">
                        <div class="step-box">
                          <span class="step-icon" alt="Step 1" />1</span>
                          <h2 class="step-title">Pass a TEST!</h2>
                          <p class="step-description">
                          Get to know your current level!</p>
                          <img class="step-img" src="https://anglomova.com/site/images/test.png">
                      </div>
                     </div>
<div class="step-item">
                        <div class="step-box">
                          <span class="step-icon" alt="Step 1" />2</span>
                          <h2 class="step-title">Choose course</h2>
                          <p class="step-description">
                          Select course that matches your level</p>
                            <img class="step-img" src="https://anglomova.com/site/images/course.png">
                          </div>
                        </div>
<div class="step-item">
<div class="step-box">
<span class="step-icon" alt="Step 1" />3</span>
<div class="step-title">Pay to start</div>
<p class="step-description">
Get most efficient English lessons after purchase!</p>
<img class="step-img" src="https://anglomova.com/site/images/payment.png">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

<div class="balance-section">
<div class="balance-box">
<div class="balance-wrapper">
<div class="balance-title">Balance</div>
<div class="balance-value">value:___</div>
<button class="recharge-btn">recharge</button>
<div class="crypto-recharge">recharge with crypto <br>(in progress)</div>
                </div>
              </div>

<div class="lesson-options">
<div class="options-list">
<button class="option-item">videocall</button>
<button class="option-item">workbook</button>
<button class="option-item">extra</button>
</div>
</div>

<div class="next-lesson-box">
<div class="next-lesson-text"> NEXT<br>LESSON
  </div></div>
<div class="next-lesson-box">
<div class="next-lesson-text"> NEXT<br>WB
  </div></div></div>
                    

<footer class="development-notice">in development...</footer>
</section>
</body>
</html>
